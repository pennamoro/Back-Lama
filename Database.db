CREATE TABLE usuario (
    id_usuario SERIAL PRIMARY KEY,
    nome VARCHAR(50),
    email VARCHAR(50),
    apelido VARCHAR(50),
    senha VARCHAR(50),
    nivel_experiencia VARCHAR(50),
    foto VARCHAR(50),
    is_admin BOOLEAN
);

CREATE TABLE receita (
    id_receita SERIAL PRIMARY KEY,
    nome VARCHAR(50),
    descricao VARCHAR(50),
    foto VARCHAR(50),
    nivel_experiencia VARCHAR(50),
    visibilidade VARCHAR(50)
);

CREATE TABLE avaliacao (
    id_receita INTEGER REFERENCES receita(id_receita),
    id_usuario INTEGER REFERENCES usuario(id_usuario),
    estrelas INTEGER,
    comentario TEXT,
    titulo VARCHAR(50),
    PRIMARY KEY (id_receita, id_usuario)
);

CREATE TABLE lista_pessoal (
    id_receita INTEGER REFERENCES receita(id_receita),
    id_usuario INTEGER REFERENCES usuario(id_usuario),
    progresso VARCHAR(50),
    PRIMARY KEY (id_receita, id_usuario)
);

CREATE TABLE usuario_cria_receita (
    id_receita INTEGER REFERENCES receita(id_receita),
    id_usuario INTEGER REFERENCES usuario(id_usuario),
    PRIMARY KEY (id_receita, id_usuario)
);

CREATE TABLE tipo (
    id_tipo SERIAL PRIMARY KEY,
    nome VARCHAR(50)
);

CREATE TABLE material (
    id_material SERIAL,
    id_tipo INTEGER REFERENCES tipo(id_tipo),
    nome VARCHAR(50),
    icone VARCHAR(50),
    PRIMARY KEY (id_material, id_tipo)
);

CREATE TABLE receita_utiliza_material (
    id_receita INTEGER REFERENCES receita(id_receita),
    id_material INTEGER,
    id_tipo INTEGER,
    PRIMARY KEY (id_receita, id_material, id_tipo),
    FOREIGN KEY (id_material, id_tipo) REFERENCES material(id_material, id_tipo)
);

CREATE TABLE passos (
    id_passos SERIAL PRIMARY KEY,
    descricao TEXT
);

CREATE TABLE etapas (
    id_etapas SERIAL,
    id_passos INTEGER REFERENCES passos(id_passos),
    descricao TEXT,
    PRIMARY KEY (id_etapas, id_passos)
);

CREATE TABLE receita_segue_etapas (
    id_receita INTEGER REFERENCES receita(id_receita),
    id_etapas INTEGER,
    id_passos INTEGER,
    descricao TEXT,
    PRIMARY KEY (id_receita, id_etapas, id_passos),
    FOREIGN KEY (id_etapas, id_passos) REFERENCES etapas(id_etapas, id_passos)
);

CREATE TABLE categoria (
    id_categoria SERIAL PRIMARY KEY,
    descricao TEXT
);

CREATE TABLE receita_separada_categoria (
    id_receita INTEGER REFERENCES receita(id_receita),
    id_categoria INTEGER REFERENCES categoria(id_categoria),
    PRIMARY KEY (id_receita, id_categoria)
);


